(this["webpackJsonptest-for-future"]=this["webpackJsonptest-for-future"]||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(24),s=a.n(n),o=(a(38),a(11)),i=(a(39),"GET/REQUEST_SEARCH"),l="GET/FETCH_BOOKS",u="GET/FETCH_BOOKS_SUCCESS",d="GET/FETCH_BOOKS_ERROR",b="PAGINATION_BOOKS/ADD_BOOKS",j="PAGINATION_BOOKS/ADD_MOREBOOKS",f="SEARCHING/ADD_SEARCCONFIG",O="SEARCHING/SEARCCONFIG_UPDATE",h="FULLBOOK/GET_FULLBOOK",p="FULLBOOK/WRITE_FULLBOOK";var m=a(13),x=(a(43),a(7)),g=(a(44),a(32)),v=a(2),_=function(e){var t=e.onSearch,a=Object(g.a)({mode:"onChange"}),c=a.reset,r=a.register,n=a.handleSubmit,s=a.formState.isValid;return Object(v.jsxs)("form",{className:"searchform",onSubmit:n((function(e){t(e),c()})),noValidate:!0,children:[Object(v.jsxs)("fieldset",{className:"searchform__fieldset",children:[Object(v.jsx)("input",Object(x.a)({className:"searchform__input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",type:"text"},r("search",{required:!0}))),Object(v.jsx)("button",{className:"searchform__btn",type:"submit",disabled:!s,children:"\u041f\u043e\u0438\u0441\u043a"})]}),Object(v.jsxs)("fieldset",{className:"searchform__fieldset searchform__fieldset_select-resize",children:[Object(v.jsxs)("label",{className:"searchform__label-select",htmlFor:"sorting",children:["Sorting by:"," "]}),Object(v.jsxs)("select",Object(x.a)(Object(x.a)({className:"searchform__select",id:"sorting"},r("sorting")),{},{children:[Object(v.jsx)("option",{value:"relevance",children:"relevance"}),Object(v.jsx)("option",{value:"newest",children:"newest"})]})),Object(v.jsxs)("label",{className:"searchform__label-select",htmlFor:"category",children:["Category:"," "]}),Object(v.jsxs)("select",Object(x.a)(Object(x.a)({className:"searchform__select",id:"category"},r("category")),{},{children:[Object(v.jsx)("option",{value:"",children:"all"}),Object(v.jsx)("option",{value:"art",children:"art"}),Object(v.jsx)("option",{value:"biography",children:"biography"}),Object(v.jsx)("option",{value:"computers",children:"computers"}),Object(v.jsx)("option",{value:"history",children:"history"}),Object(v.jsx)("option",{value:"medical",children:"medical"}),Object(v.jsx)("option",{value:"poetry",children:"poetry"})]}))]})]})};var y=function(e){var t=e.onSearch;return Object(v.jsx)("header",{className:"header",children:Object(v.jsx)(_,{onSearch:t})})},k=(a(47),a(48),a(8)),N="https://images.unsplash.com/photo-1599508704512-2f19efd1e35f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80",S=function(e){var t=e.item,a=Object(k.g)(),c=Object(m.b)(),n=t.volumeInfo,s=n.categories,i=n.title,l=n.authors,u=(t.volumeInfo.imageLinks||N).thumbnail,d=r.a.useState(""),b=Object(o.a)(d,2),j=b[0],f=b[1],O=r.a.useState(""),p=Object(o.a)(O,2),x=p[0],g=p[1];return r.a.useEffect((function(){if(s){var e=s.join(", ");f(e)}if(l){var t=l.join(", ");g(t)}}),[s,l]),Object(v.jsxs)("li",{className:"bookscard",onClick:function(){var e;c((e=t.selfLink,{type:h,selfLink:e})),a.push("/book")},children:[Object(v.jsx)("img",{className:"bookscard__img",src:u||N,alt:"#"}),Object(v.jsxs)("div",{className:"bookscard__footer",children:[j&&Object(v.jsxs)("p",{className:"bookscard__text",children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f: ",j]}),Object(v.jsxs)("p",{className:"bookscard__text",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",i]}),x&&Object(v.jsxs)("p",{className:"bookscard__text",children:["\u0410\u0432\u0442\u043e\u0440: ",x]})]})]})},C=(a(51),function(){return Object(v.jsx)("div",{className:"preloader",children:Object(v.jsx)("div",{className:"preloader__container",children:Object(v.jsx)("span",{className:"preloader__round"})})})}),E=function(e){var t=e.books,a=e.onClickMore,c=e.isLoading,r=Object(m.c)((function(e){return e.cards.isLoadMore}));return Object(v.jsxs)("section",{className:"books",children:[c?Object(v.jsx)(C,{}):Object(v.jsx)("ul",{className:"books-items",children:t&&t.map((function(e){return Object(v.jsx)(S,{item:e},e.id)}))}),r&&t.length&&Object(v.jsx)("button",{type:"button",className:"books__btn",onClick:function(){a()},disabled:!r,children:"more"})]})},w=(a(52),a(53),function(e){var t=e.item.volumeInfo,a=t.title,c=t.authors,n=t.categories,s=t.imageLinks,i=t.description,l=r.a.useState(""),u=Object(o.a)(l,2),d=u[0],b=u[1],j=r.a.useState(""),f=Object(o.a)(j,2),O=f[0],h=f[1];r.a.useEffect((function(){if(n){var e=n.join(" / ");b(e)}if(c){var t=c.join(", ");h(t)}}),[n,c]);var p=s.small,m=s.large;return Object(v.jsxs)("li",{className:"fullbook",children:[Object(v.jsx)("div",{className:"fullbook__container-img",children:Object(v.jsx)("img",{className:"fullbook__img",src:m||p,alt:a})}),Object(v.jsxs)("div",{className:"fullbook__container",children:[d&&Object(v.jsx)("p",{className:"fullbook__category",children:d}),Object(v.jsx)("h3",{className:"fullbook__title",children:a}),O&&Object(v.jsx)("p",{className:"fullbook__author",children:O}),Object(v.jsx)("p",{className:"fullbook__description",children:i})]})]})}),I=function(e){var t=e.fullbook;return Object(v.jsx)("section",{className:"bookpage",children:Object(v.jsx)("ul",{className:"bookpage__list",children:t&&t.map((function(e){return Object(v.jsx)(w,{item:e},e.id)}))})})};var L=function(){var e=Object(m.b)(),t=Object(k.g)(),a=r.a.useState([]),c=Object(o.a)(a,2),n=c[0],s=c[1],l=Object(m.c)((function(e){return e.search})),u=l.searchWord,d=l.sorting,j=l.category,h=Object(m.c)((function(e){return e.search.startIndex})),p=Object(m.c)((function(e){return e.cards.fetchedCards.items})),x=Object(m.c)((function(e){return e.cards.isLoading})),g=Object(m.c)((function(e){return e.fullbook})),_=g.fullbook,N=g.showFullBook;return r.a.useEffect((function(){if(p){var e=p.filter((function(e){return e.volumeInfo.categories&&j?"object"===typeof e:null})).filter((function(e){return e.volumeInfo.categories.includes((t=j)?t[0].toUpperCase()+t.slice(1):t);var t}));s(""!==j?e:p)}}),[p,j]),Object(v.jsx)("div",{className:"page",children:Object(v.jsxs)("div",{className:"page__container",children:[Object(v.jsx)(y,{onSearch:function(a){var c={searchWord:a.search,startIndex:0,sorting:a.sorting,category:a.category};e(function(e){return{type:i,searchConfig:e}}(c)),e(function(e){return{type:f,payload:e}}(c)),s([]),t.push("/")}}),Object(v.jsxs)(k.d,{children:[Object(v.jsx)(k.b,{exact:!0,path:"/",children:Object(v.jsx)(E,{books:n,onClickMore:function(){if(console.log("searchWord",u),p.length){var t={search:u,startIndex:h+10,sorting:d,category:j};e(function(e){return{type:b,searchConfig:e}}(t)),e(function(e){return{type:O,payload:e}}(t))}},isLoading:x})}),Object(v.jsx)(k.b,{exact:!0,path:"/book",children:Object(v.jsx)(I,{fullbook:_})})]}),Object(v.jsx)(k.b,{path:"/",children:N?Object(v.jsx)(k.a,{to:"/book"}):Object(v.jsx)(k.a,{to:"/"})})]})})},B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,55)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))},F=a(18),T=a(33),A=a(9),R={fetchedCards:[],isLoadMore:!0,isLoading:!1,error:null},G={searchWord:"",startIndex:0,sorting:"",category:""},M={fullbook:[],showFullBook:!1},K=Object(F.b)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return console.log("FETCH_BOOKS",t.payload),Object(x.a)(Object(x.a)({},e),{},{fetchedCards:[],isLoadMore:!0,isLoading:!0,error:""});case u:console.log("FETCH_BOOKS_SUCCESS",t.payload),t.payload.items.length<10&&(e.isLoadMore=!1);var a=Object(A.a)(new Map(t.payload.items.map((function(e){return[e.id,e]}))).values());return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:{items:a,kind:t.payload.kind,totalItems:t.payload.totalItems},isLoading:!1,error:""});case d:return console.log("FETCH_BOOKS_ERROR",t.payload),Object(x.a)(Object(x.a)({},e),{},{fetchedCards:[],isLoadMore:!0,isLoading:!1,error:t.payload});case j:t.payload.items.length<10&&(e.isLoadMore=!1);var c=e.fetchedCards.items.concat(t.payload.items),r=Object(A.a)(new Map(c.map((function(e){return[e.id,e]}))).values());return Object(x.a)(Object(x.a)({},e),{},{fetchedCards:{items:r,kind:t.payload.kind,totalItems:t.payload.totalItems}});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(x.a)(Object(x.a)({},e),{},{searchWord:t.payload.searchWord,startIndex:t.payload.startIndex,sorting:t.payload.sorting,category:t.payload.category});case O:return Object(x.a)(Object(x.a)({},e),{},{searchWord:t.payload.search,startIndex:e.startIndex+=10,sorting:t.payload.sorting,category:t.payload.category});default:return e}},fullbook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var a=[];return a.push(t.payload),Object(x.a)(Object(x.a)({},e),{},{fullbook:a,showFullBook:!0});default:return e}}}),D=a(4),H=a.n(D),W=a(17),U=a(12),P="https://www.googleapis.com/books/v1/volumes?q",V="AIzaSyAiAERcpGEYcW42YWIGNBdar-rU8L6v5nI";function q(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(U.a)(H.a.mark((function e(t){var a,c,r,n,s,o,i,l;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchConfig,c=a.searchWord,r=void 0===c?t.searchConfig.search:c,n=a.startIndex,s=a.sorting,o=a.category,e.next=3,fetch("".concat(P,"=").concat(r,"&subject:").concat(o,"&orderBy=").concat(s,"&startIndex=").concat(n,"&key=").concat(V));case 3:if((i=e.sent).ok){e.next=7;break}throw l=i.status,new Error(l);case 7:return e.next=9,i.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return J.apply(this,arguments)}function J(){return(J=Object(U.a)(H.a.mark((function e(t){var a,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.selfLink,e.next=3,fetch(a);case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=H.a.mark(ee),Q=H.a.mark(te),Z=H.a.mark(ae),$=H.a.mark(ce);function ee(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.c)(i,te);case 2:return e.next=4,Object(W.c)(b,ae);case 4:return e.next=6,Object(W.c)(h,ce);case 6:case"end":return e.stop()}}),X)}function te(e){var t;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(W.b)({type:l});case 3:return a.next=5,Object(W.a)(q,e);case 5:return t=a.sent,a.next=8,Object(W.b)({type:u,payload:t});case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("SAGA_ERROR",a.t0);case 13:case"end":return a.stop()}}),Q,null,[[0,10]])}function ae(e){var t;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(W.a)(q,e);case 3:return t=a.sent,a.next=6,Object(W.b)({type:j,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({message:a.t0.message});case 11:case"end":return a.stop()}}),Z,null,[[0,8]])}function ce(e){var t;return H.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(W.a)(z,e);case 3:return t=a.sent,a.next=6,Object(W.b)({type:p,payload:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log({message:a.t0.message});case 11:case"end":return a.stop()}}),$,null,[[0,8]])}var re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.c,ne=Object(T.a)(),se=Object(F.d)(K,Object(F.c)(Object(F.a)(ne),re()));ne.run(ee);var oe=a(27);s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(oe.a,{children:Object(v.jsx)(m.a,{store:se,children:Object(v.jsx)(L,{})})})}),document.getElementById("root")),B()}},[[54,1,2]]]);
//# sourceMappingURL=main.559e8939.chunk.js.map